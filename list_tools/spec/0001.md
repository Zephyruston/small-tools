# 规格说明书 0001: 包管理器工具发现与文档生成器

## 概述

一个全面的工具发现和文档生成系统，用于识别通过 Go (go install)、npm (npm install -g) 和 Cargo (cargo install) 全局安装的包，然后使用 LLM 分析生成安装命令并保持最新文档。

## 需求

### 核心功能

1. **包发现**
   - 扫描全局安装的 Go 包
   - 扫描全局安装的 npm 包  
   - 扫描全局安装的 Cargo 包
   - 将所有发现的工具聚合到统一清单中

2. **文档生成**
   - 生成列出所有发现工具的 Markdown 文档
   - 使用 LLM 分析确定每个工具的安装命令
   - 使用验证的安装程序更新文档

3. **自动化**
   - 跨所有三个包管理器的自动发现过程
   - 智能的 LLM 集成以生成准确命令
   - 文档更新工作流

### 技术需求

#### 包管理器集成
- **Go**: 查询 GOPATH 和 GOROOT 中的已安装二进制文件
- **npm**: 访问全局 npm 包列表
- **Cargo**: 查询 Cargo 主目录中的已安装二进制文件

#### LLM 集成
- 命令分析和生成的 API 集成
- 处理模糊或未知工具的错误处理
- 生成命令的验证

#### 文档系统
- Markdown 格式输出
- 按包管理器结构化组织
- 版本跟踪和变更历史

## 设计规格

### 架构概述

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Go 扫描器     │    │   npm 扫描器    │    │ Cargo 扫描器    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         └───────────────────────┼───────────────────────┘
                                 │
                    ┌─────────────────┐
                    │   工具聚合器     │
                    └─────────────────┘
                                 │
                    ┌─────────────────┐
                    │   LLM 分析器     │
                    └─────────────────┘
                                 │
                    ┌─────────────────┐
                    │   文档生成器     │
                    └─────────────────┘
```

### 数据流

1. **发现阶段**
   - 扫描每个包管理器的已安装工具
   - 收集元数据（名称、版本、路径、安装日期）
   - 将数据规范化为统一格式

2. **分析阶段**
   - 将工具信息发送给 LLM 进行命令生成
   - 验证和完善生成的命令
   - 处理边缘情况和未知工具

3. **文档阶段**
   - 生成结构化的 Markdown
   - 按包管理器和工具类别组织
   - 更新现有文档的变更

### 文件结构

```
├── spec/
│   ├── 0001.md              # 本规格说明书
│   └── idea.md              # 原始想法
├── src/
│   ├── scanners/            # 包管理器扫描器
│   │   ├── go_scanner.go
│   │   ├── npm_scanner.js
│   │   └── cargo_scanner.rs
│   ├── analyzer/            # LLM 集成
│   │   └── llm_analyzer.py
│   ├── generator/           # 文档生成
│   │   └── doc_generator.py
│   └── main.py              # 主要编排
├── docs/
│   └── tools.md             # 生成的文档
└── config/
    └── config.yaml          # 配置设置
```

## 实施计划

### 第一阶段：包扫描器
1. 实现 Go 包扫描器
2. 实现 npm 包扫描器  
3. 实现 Cargo 包扫描器
4. 创建统一数据模型

### 第二阶段：LLM 集成
1. 设计 LLM API 集成
2. 实现命令生成的提示工程
3. 添加验证和错误处理
4. 使用已知工具测试

### 第三阶段：文档生成
1. 创建 Markdown 模板系统
2. 实现文档更新逻辑
3. 添加版本跟踪
4. 测试完整工作流

### 第四阶段：完善和优化
1. 添加配置选项
2. 实现错误恢复
3. 添加日志和监控
4. 性能优化

## 成功标准

- ✅ 成功发现所有三个包管理器中 95%+ 的已安装工具
- ✅ 为 90%+ 的发现工具生成准确的安装命令
- ✅ 生成结构良好、可读的 Markdown 文档
- ✅ 优雅处理边缘情况和未知工具
- ✅ 无需人工干预即可高效更新文档

## 未来增强功能

1. **其他包管理器**: 支持 pip、brew、apt 等
2. **分类**: 自动工具分类和标记
3. **依赖分析**: 显示工具依赖关系
4. **Web 界面**: 基于 Web 的文档查看器
5. **定期更新**: 自动定期文档刷新
6. **集成**: CI/CD 管道集成

## 说明

该工具解决了跨多个包管理器维护开发工具准确文档的常见问题。通过自动化发现和文档生成，它确保安装程序始终保持最新且易于访问。